{% extends "base.html" %} 
{% load static %} 
{% block title %}
  {{ title }}
{%endblock %} 
<link rel="stylesheet" href="{% static 'dropzone-custom.css' %}" />
{% block content %}
<div class="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8">
  <header
    class="text-center mb-10 bg-indigo-500 rounded-xl p-8 text-white shadow-xl"
  >
    <h1 class="text-4xl font-extrabold">üì£ {{ title }}</h1>
    <p class="text-lg mt-2 opacity-90">
      ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£/‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏à‡∏≤‡∏Å‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£
    </p>
  </header>

  <div class="bg-white p-6 sm:p-8 rounded-xl shadow-2xl border border-gray-100">
    <form method="POST" enctype="multipart/form-data" id="notification-form" class="space-y-6" >
      {% csrf_token %}

      <div class="card bg-base-100 border border-base-200 shadow-md">
        <div class="card-body p-6">
          <h2 class="card-title text-2xl mb-4 text-indigo-700">
            üìã ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®
          </h2>

          <div class="form-control">
            <label class="label"
              ><span class="label-text font-bold"
                >‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® (Title)*</span
              ></label
            >
            {{ form.title }} {% if form.title.errors %}
              <span class="text-error text-sm mt-1">{{ form.title.errors }}</span
            {% endif %}
          </div>

          <div class="form-control">
            <label class="label"
              ><span class="label-text font-bold"
                >‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î*</span
              ></label
            >
            {{ form.content }} {% if form.content.errors %}<span
              class="text-error text-sm mt-1"
              >{{ form.content.errors }}</span
            >{% endif %}
          </div>

          <div class="form-control">
            <label class="label"
              ><span class="label-text font-bold"
                >{{ form.notification_type.label }}*</span
              ></label
            >
            {{ form.notification_type }} 
            {% if form.notification_type.errors%}
            <span class="text-error text-sm mt-1">{{ form.notification_type.errors }}</span>
            {% endif %}
          </div>
        </div>
      </div>
    <div class="bg-base-100 p-6 rounded-lg border border-gray-200">
      <h2 class="text-xl font-semibold text-primary-blue-custom mb-4">
        ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏∏‡∏ô‡∏±‡∏Ç (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 5 ‡∏£‡∏π‡∏õ)
      </h2>


      {% comment %} <div class="form-control">
        <label class="label">
          <span class="label-text font-bold">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</span>
        </label>
        {{ form.image }}
        {% if form.image.errors %}
          <span class="text-error text-sm mt-1">
            {{ form.image.errors }}
          </span>
        {% endif %}
      </div> {% endcomment %}
      {# Dropzone Area #}
      <div id="dropzone-area" class="dropzone">
        <div class="dz-message">
          <p class="text-lg text-gray-600 mb-2">
            ‡∏•‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå
          </p>
        </div>
      </div>

      {# Hidden formset ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û #}
      {% comment %} <div id="formset-container" style="display: none">
        {{ formset.management_form }}
        <div id="formset-forms"></div>
      </div> {% endcomment %}

      <input
      type="file"
      name="{{ form.image.html_name }}"
      id="id_image"
      accept="image/*"
      style="display: none"
      />
      {% if form.image.errors %}
        <span class="text-error text-sm mt-1">
          {{ form.image.errors }}
        </span>
      {% endif %}
      {# Preview area #}
      <div
        id="image-preview"
        class="mt-4 grid grid-cols-2 md:grid-cols-3 gap-4"
      ></div>
    </div>

        <div class="card bg-base-100 border border-base-200 shadow-md">
          <div class="card-body p-6">
            <h2 class="card-title text-lg text-indigo-700">‚≠ê ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏û‡∏¥‡πÄ‡∏®‡∏©</h2>

            <div
              class="form-control flex-row items-center justify-between border p-3 rounded-lg bg-red-50"
            >
              <label class="label cursor-pointer p-0">
                <span class="label-text font-bold text-red-600 mr-4"
                  >{{ form.is_important.label }}</span
                >
              </label>
              {{ form.is_important }} {% if form.is_important.errors %}<span
                class="text-error text-sm mt-1"
                >{{ form.is_important.errors }}</span
              >{% endif %}
            </div>

            <div class="form-control mt-4">
              <label class="label"
                ><span class="label-text font-bold"
                  >{{ form.dog.label }}</span
                ></label
              >
              {{ form.dog }} {% if form.dog.errors %}<span
                class="text-error text-sm mt-1"
                >{{ form.dog.errors }}</span
              >{% endif %}
              <p class="text-xs text-gray-500 mt-1">
                *‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏Ñ‡∏∑‡∏≠ '‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏∏‡∏ô‡∏±‡∏Ç' ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-8">
        <button
          type="submit"
          class="btn btn-primary btn-block btn-lg shadow-lg"
        >
          {{ submit_text }}
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
{% block extra_scripts %}
<!-- Dropzone Custom JS (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏±‡∏ô cache ‡πÄ‡∏Å‡πà‡∏≤) -->
<script src="{% static 'dropzone-custom.js' %}?v=2"></script>
<script>
  // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ Dropzone Formset Handler
  initDropzoneSingle({
    dropzoneId: "dropzone-area",
    previewContainerId: "image-preview",
    inputId: "id_image",
    formId: "notification-form",
    maxFiles: 1,
  });
</script>
{% endblock %}
