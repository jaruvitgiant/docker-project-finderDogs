{% extends "base.html" %} {% load static %} {% block title%}
‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏ô‡∏±‡∏Ç {% endblock %} {% block extra_head %}
<!-- Dropzone Custom CSS -->
<link rel="stylesheet" href="{% static 'dropzone-custom.css' %}" />
{% endblock %} {% block content %}

<div class="max-w-4xl mx-auto bg-white p-8 shadow-xl rounded-xl">
  <h1 class="text-3xl font-bold text-gray-800 mb-6">üê∂ ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏ô‡∏±‡∏Ç</h1>

  {% if messages %}
  <div class="mb-6">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} mb-2">
      <span>{{ message }}</span>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <form
    method="post"
    enctype="multipart/form-data"
    id="dog-form"
    class="space-y-8"
  >
    {% csrf_token %}

    <div class="bg-base-100 p-6 rounded-lg border border-gray-200">
      <h2 class="text-xl font-semibold text-primary-blue-custom mb-4">
        ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="form-control">{{ form.name.label_tag }}{{ form.name }}</div>
        <div class="form-control">{{ form.age.label_tag }}{{ form.age }}</div>

        <div class="form-control">
          <label class="label">{{ form.gender.label }}</label>
          {{ form.gender }}
        </div>
      </div>
    </div>

    <div class="bg-base-100 p-6 rounded-lg border border-gray-200">
      <h2 class="text-xl font-semibold text-primary-blue-custom mb-4">
        ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏†‡∏≤‡∏û
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="form-control">
          {{ form.primary_color.label_tag }}{{ form.primary_color }}
        </div>
        <div class="form-control">
          {{ form.secondary_color.label_tag }}{{ form.secondary_color }}
        </div>

        <div class="form-control">
          {{ form.weight.label_tag }}{{ form.weight }}
        </div>
        <input type="hidden" name="is_lost" value="False">
        <div class="form-control md:col-span-3">
          {{ form.distinguishing_marks.label_tag }}
          {{form.distinguishing_marks}}
        </div>
      </div>
    </div>

    <div class="bg-base-100 p-6 rounded-lg border border-gray-200">
      <h2 class="text-xl font-semibold text-primary-blue-custom mb-4">
        ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß
      </h2>
      <div class="grid grid-cols-1 gap-4">
        <div class="form-control">{{ form.size.label }} {{ form.size }}</div>
        <span>
          <img src="{% static 'dogsizepng.png' %}" />
        </span>
      </div>
    </div>

    <div class="bg-base-100 p-6 rounded-lg border border-gray-200">
      <h2 class="text-xl font-semibold text-primary-blue-custom mb-4">
        ‡∏ô‡∏¥‡∏™‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="form-control">
          {{ form.personality.label_tag }}{{ form.personality }}
        </div>
        <div class="form-control">
          {{ form.favorite_food.label_tag }}{{ form.favorite_food }}
        </div>
        <div class="form-control">
          {{ form.allergies.label_tag }}{{ form.allergies }}
        </div>
      </div>
    </div>
    {% if role == 'org_admin' %}
    <h2 class="text-2xl font-bold text-gray-700 mt-8 mb-4 border-t pt-4">
      ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•)
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="label"
          ><span class="label-text">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î (‡∏ó‡∏≥‡∏´‡∏°‡∏±‡∏ô)</span></label
        >
        {{ form.sterilization_status }} {% if form.sterilization_status.errors%}
        <p class="text-error text-sm">{{ form.sterilization_status.errors }}</p>
        {% endif %}
      </div>

      <div>
        <label class="label"
          ><span class="label-text">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</span></label
        >
        {{ form.sterilization_date }} {% if form.sterilization_date.errors %}
        <p class="text-error text-sm">{{ form.sterilization_date.errors }}</p>
        {% endif %}
      </div>
    </div>

    <div class="form-control mt-4 p-4 border rounded-lg bg-gray-50">
      <label class="label">
        <span class="label-text text-lg font-semibold">‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏ó‡∏µ‡πà‡∏â‡∏µ‡∏î‡πÅ‡∏•‡πâ‡∏ß</span>
      </label>
      {{ form.vaccine_selection }} {% if form.vaccine_selection.errors %}
      <p class="text-error text-sm mt-2">{{ form.vaccine_selection.errors }}</p>
      {% endif %}
    </div>

    {{ form.vaccination_history }} {% endif %}

    <div class="bg-base-100 p-6 rounded-lg border border-gray-200">
      <h2 class="text-xl font-semibold text-primary-blue-custom mb-4">
        ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏∏‡∏ô‡∏±‡∏Ç (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 5 ‡∏£‡∏π‡∏õ)
      </h2>

      {# Dropzone Area #}
      <div id="dropzone-area" class="dropzone">
        <div class="dz-message">
          <p class="text-lg text-gray-600 mb-2">
            ‡∏•‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå
          </p>
        </div>
      </div>

      {# Hidden formset ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û #}
      <div id="formset-container" style="display: none">
        {{ formset.management_form }}
        <div id="formset-forms"></div>
      </div>

      {# Preview area #}
      <div
        id="image-preview"
        class="mt-4 grid grid-cols-2 md:grid-cols-3 gap-4"
      ></div>
    </div>

    <button
      type="submit"
      class="btn btn-lg w-full text-white bg-primary-blue-custom hover:bg-blue-600 border-none"
    >
      ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏ô‡∏±‡∏Ç
    </button>
  </form>
</div>
{% endblock %} {% block extra_scripts %}
<!-- Dropzone Custom JS -->
<script src="{% static 'dropzone-custom.js' %}"></script>
<script>
  // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ Dropzone Formset Handler
  initDropzoneFormset({
    dropzoneId: "dropzone-area",
    formsetContainerId: "formset-container",
    formsetFormsId: "formset-forms",
    previewContainerId: "image-preview",
    formId: "dog-form",
    maxFiles: 5,
    existingImagesCount: 0,
  });
</script>
{% endblock %}
